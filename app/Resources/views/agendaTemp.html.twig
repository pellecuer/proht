{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.18/af-2.3.2/b-1.5.4/b-flash-1.5.4/b-html5-1.5.4/b-print-1.5.4/sl-1.2.6/datatables.min.css"/>
{% endblock %}
{% block title %}Agenda Brouillon{% endblock %}
{% block body %}    
<div class="container">
    <header class="text-center py-3">
        <h1 class="bg-white-semi_transparent"><em class="text-dark"></em>AGENDA BROUILLON</h1>
        <p>Modifier votre planning ou celui de vos équipes</p>
    </header>
    <div class="row border border-rounded my-2">
        <div class="col-md-10">
                <span class="fa-stack fa-1x my-2">
                    <i class="fas fa-circle fa-stack-2x text-secondary"></i>
                    <a href="{{ path('createEvent') }}"><i class="fas fa-plus fa-stack-1x fa-inverse text-white"></i></a>
                </span>
            <span id="buttonPrint">
                </span>
        </div>
    </div>
    <div class= "row">
        <div class="col-md-12">
            <table id="example" class="table table-striped table-hover table-sm shadow-lg" style="width:100%">
                <caption class="text-center">Equipe {{ team.name }} du {{ startDate|localizeddate('none', 'none', 'fr', null, 'EE d MMMM y')}} au  {{ endDate|localizeddate('none', 'none', 'fr', null, ' E d MMMM y')}}</caption>
                <thead class="thead">
                    <tr class="bg-muted">
                        <th scope ="col" class="text-success">Vacances</th>
                        <th scope ="col" class="text-info"></th>
                        <th scope ="col" class="text-info"></th>
                        <th scope ="col" class="text-info"></th>
                        {% for holiday in holidays %}
                        <th scope ="col"
                            {% if holiday%}
                                class="bg-success border border-light">
                            {% else %}
                                class="text-light">
                            {% endif %}
                        {% endfor %}
                        </th>
                    </tr>

                    <tr class ="bg-dark">
                        <th scope ="col" class="text-info"><a class="btn btn-success btn-sm" href="{{ path('validTemp', { 'id': team.id, 'userId': app.user.id}) }}" role="button">Valider</a></th>
                        <th scope ="col" class="text-info"><a class="btn btn-danger btn-sm" href="{{ path('deleteTemp', { 'id': team.id, 'userId': app.user.id}) }}" role="button">Effacer</a></th>
                        <th scope ="col" class="text-info"></th>
                        <th scope ="col" class="text-info"></th>
                        {% for dateBetween in dateBetweens %}
                        <th scope ="col" class="text-light">
                            {% if dateBetween.date|localizeddate('none', 'none', 'fr', null, 'e')  == 6 %}
                                S
                            {% elseif dateBetween.date|localizeddate('none', 'none', 'fr', null, 'e')  == 1 %}
                                L
                            {% elseif dateBetween.date|localizeddate('none', 'none', 'fr', null, 'e')  == 2 %}
                                M
                            {% elseif dateBetween.date|localizeddate('none', 'none', 'fr', null, 'e')  == 3 %}
                                M
                            {% elseif dateBetween.date|localizeddate('none', 'none', 'fr', null, 'e')  == 4 %}
                                J
                            {% elseif dateBetween.date|localizeddate('none', 'none', 'fr', null, 'e')  == 5 %}
                                V
                             {% else %}
                                D
                             {% endif %}
                        {% endfor %}
                        </th>
                        <th scope ="col" class="text-info"></th>
                        <th scope ="col" class="text-info"></th>
                        <th scope ="col" class="text-info"></th>
                    </tr>
                    <tr class="bg-muted">
                        <th scope ="col" class="text-color-blue">Nom</th>
                        <th scope ="col" class="text-color-blue">Prénom</th>
                        <th scope ="col" class="text-color-blue">NNI</th>
                        <th scope ="col" class="text-color-blue">Fonction</th>
                        {% for dateBetween in dateBetweens %}
                        <th scope ="col" class="">{{ dateBetween.date|localizeddate('none', 'none', 'fr', null, 'd') }}</th>
                        {% endfor %}
                        <th scope ="col" class="text-info"></th>
                        <th scope ="col" class="text-info"></th>
                        <th scope ="col" class="text-info"></th>
                    </tr>
                </thead>
                <tbody>                        
                    {% for agentBetween in agentBetweens %}
                        <tr>                               
                            <td>{{agentBetween.0.agent.name  }}</td>
                            <td>{{agentBetween.0.agent.firstname  }}</td>
                            <td>{{agentBetween.0.agent.nni  }}</td>
                            <td>{{agentBetween.0.agent.function  }}</td>
                           {% for letter in agentBetween %}
                                <td id = "{{ letter.id }}" class="editFor
                                    {% if letter.letter.letter == 'R' %}
                                        table-success 
                                    {% elseif letter.letter.letter == 'H' %}
                                        table-danger
                                    {% else %} 
                                        table-info
                                    {% endif %}
                                        ">{{ letter.letter.letter }}
                                </td>
                            {% endfor %}
                            <td class="update" scope ="col"><i class="fas fa-edit text-color-blue"></i></td>
                            <td class="check"><a href=""><i class="fas fa-check text-success"></i></a></td>
                            <td class="trash"><a href="{{ path('deleteAgenda', { 'agentId': agentBetween.0.agent.id }) }}"><i class="fas fa-trash-alt text-danger"></i></a></td>                                                                
                        </tr>
                   {% endfor %}                        
                </tbody>                 
            </table>
            <h5>Description : <span id="titre"></span></h5>            
            <h5>Détail : <span id="description"></span></h5>
            <h5>Début de semaine légale : <span id="startLegalWeek"></span></h5>
            <h5>Fin de semaine légale : <span id="endLegalWeek"></span></h5>
            <h5>Début de journée : <span id="startDay"></span></h5>
            <h5>Fin de journée : <span id="endDay"></span></h5>
            <h5>Heures totalisés cette semaine : <span id="hoursPerWeek"></span></h5>
            <h5>Temps de repos avant DDay : <span id="intervalBefore"></span></h5>
            <h5>Temps de repos après DDay : <span id="intervalAfter"></span></h5>
            <h5>Average : <span id="average"></span></h5>
            
            
           {# {% for dateBetween in dateBetweens %}
                <th class="">{{dateBetween.date | date("F jS \\a\\t g:ia", "Europe/Paris") }}</th>
                {% endfor %}
            #}
        </div>
    </div>
</div> 
{% endblock %}


{% block javascripts %}
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.18/af-2.3.2/b-1.5.4/b-flash-1.5.4/b-html5-1.5.4/b-print-1.5.4/sl-1.2.6/datatables.min.js"></script>
<script type="text/javascript" src="/assets/js/datatable/configAgendaTemp.js"></script>
<script type="text/javascript" src="/assets/js/datatable/ajax.js"></script>
<script type="text/javascript" src="/assets/js/datatable/addDeleteRow.js"></script>
{% endblock %}
